<?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {

	$tail = '
<div style="height:150px;overflow-y:scroll">
<p><a href="https://1.878.kr/281">혼자놀기 끝판왕!!️ ChatGPT로 그림 그리기</a></p>
<p><a href="https://newtoki.iwinv.net/">[칼럼] 사람의 심리는 어떻게 형성될까?</a></p>
<p><a href="https://ruliweb.iwinv.net/">우주 탐사는 어떻게 진행되고 있나?</a></p>
<p><a href="https://instiz.iwinv.net/">미래의 기술 혁신이 우리의 삶을 바꿀 5가지 방법</a></p>
<p><a href="https://gmarket.iwinv.net/">환경 보호를 위한 실천 방법 10가지</a></p>
<p><a href="https://aliexpress.iwinv.net/">역사 속에서 발견된 의외의 발명품들</a></p>
<p><a href="https://linkkf.iwinv.net/">자기 계발서가 주는 긍정적인 영향</a></p>
<p><a href="https://facebook.iwinv.net/">성공적인 창업을 위한 7가지 필수 조건</a></p>
<p><a href="https://paypay.iwinv.net/">현대 사회에서 명상과 마음챙김의 중요성</a></p>
<p><a href="https://etoland.iwinv.net/">AI와 인간의 공존, 미래는 어떻게 변할까?</a></p>
<p><a href="https://auction.iwinv.net/">재테크 초보를 위한 투자 가이드</a></p>
<p><a href="https://trends.iwinv.net/">기후 변화에 대처하는 글로벌 정책</a></p>
<p><a href="https://asdasd.iwinv.net/">심리학적으로 본 인간의 습관 형성</a></p>
<p><a href="https://kangkas.iwinv.net/">동물들의 놀라운 생존 전략</a></p>
<p><a href="https://lavikit.iwinv.net/">건강한 식단이 삶에 미치는 영향</a></p>
<p><a href="https://maplegg.iwinv.net/">세계 여행지 추천: 꼭 가봐야 할 장소들</a></p>
<p><a href="https://kemono.iwinv.net/">고대 문명들이 남긴 놀라운 유물들</a></p>
<p><a href="https://redgifs.iwinv.net/">미래 교통수단: 하이퍼루프부터 드론까지</a></p>
<p><a href="https://wikikr.iwinv.net/">어린이를 위한 STEM 교육의 필요성</a></p>
<p><a href="https://yourgg.iwinv.net/">현대 건축의 트렌드와 미래 전망</a></p>
<p><a href="https://koreakr.iwinv.net/">세계의 신기한 풍습과 문화들</a></p>
<p><a href="https://capcut.iwinv.net/">스마트폰으로 고퀄리티 사진을 찍는 방법</a></p>
<p><a href="https://snp500.iwinv.net/">우주 탐험과 과학의 미래</a></p>
<p><a href="https://shopee.iwinv.net/">자연 재해와 인간의 대처 방법</a></p>
<p><a href="https://namuwiki.iwinv.net/">성공적인 커리어 전환을 위한 팁</a></p>
<p><a href="https://novelpia.iwinv.net/">미래의 교육 시스템은 어떻게 변화할까?</a></p>
<p><a href="https://popcat.iwinv.net/">알아두면 쓸모 있는 소소한 생활 팁</a></p>
<p><a href="https://fiveguys.iwinv.net/">패션 업계에서 떠오르는 지속 가능한 소재들</a></p>
<p><a href="https://compose.iwinv.net/">효율적인 시간 관리를 위한 방법 7가지</a></p>
<p><a href="https://jjang0u.iwinv.net/">자연을 보존하기 위한 작은 실천</a></p>
<p><a href="https://mmtcld.iwinv.net/">현대 예술의 새로운 흐름, 디지털 아트</a></p>
<p><a href="https://tdgall.iwinv.net/">미래의 직업들: 지금부터 준비해야 할 스킬</a></p>
<p><a href="https://yakored.iwinv.net/">잠의 중요성과 올바른 수면 습관</a></p>
<p><a href="https://postype.iwinv.net/">미술 치료가 정신 건강에 미치는 영향</a></p>
<p><a href="https://manatoki.iwinv.net/">디지털 시대에 종이책의 의미</a></p>
<p><a href="https://dctribe.iwinv.net/">운동이 우리 몸에 미치는 긍정적 영향</a></p>
<p><a href="https://blacktoon.iwinv.net/">음악이 주는 심리적 힐링 효과</a></p>
<p><a href="https://munpia.iwinv.net/">리더십 개발을 위한 효과적인 전략</a></p>
<p><a href="https://snpetf.iwinv.net/">테크놀로지가 미래 의료에 미치는 영향</a></p>
<p><a href="https://hygall.iwinv.net/">비즈니스에서 창의성을 발휘하는 법</a></p>
<p><a href="https://mingky.iwinv.net/">미래의 스마트 홈 기술</a></p>
<p><a href="https://fanbox.iwinv.net/">예술과 기술의 융합, 새로운 표현 방식</a></p>
<p><a href="https://skyscanner.iwinv.net/">저비용으로 세계 여행하는 방법</a></p>
<p><a href="https://flightaware.iwinv.net/">항공 여행의 변화, 더 나은 미래를 위한 준비</a></p>
<p><a href="https://interpals.iwinv.net/">외국어 학습에서 중요한 5가지 팁</a></p>
<p><a href="https://fconline.iwinv.net/">인터넷 보안의 중요성과 우리의 대응</a></p>
<p><a href="https://flextv.iwinv.net/">스트리밍 서비스가 미디어 소비를 바꾸는 방법</a></p>
<p><a href="https://dcinside.iwinv.net/">사진 촬영의 기본 가이드</a></p>
<p><a href="https://mlbpark.iwinv.net/">운동과 뇌 건강의 상관관계</a></p>
<p><a href="https://eomisae.iwinv.net/">세계 경제 변화와 개인의 재정 관리</a></p>
<p><a href="https://ecount.iwinv.net/">디지털 노마드가 일하는 새로운 방식</a></p>
<p><a href="https://hiworks.iwinv.net/">효과적인 팀워크를 위한 커뮤니케이션 기술</a></p>
<p><a href="https://laftel.iwinv.net/">애니메이션에서 찾아볼 수 있는 철학적 요소</a></p>
<p><a href="https://toomics.iwinv.net/">창의성을 높이는 일상 속 아이디어 발상법</a></p>
<p><a href="https://mercari.iwinv.net/">중고거래에서 주의해야 할 5가지 사항</a></p>
<p><a href="https://iptime.iwinv.net/">홈 네트워크를 구축하는 가장 쉬운 방법</a></p>
<p><a href="https://mixamo.iwinv.net/">3D 애니메이션이 영화에 미치는 영향</a></p>
<p><a href="https://yandex.iwinv.net/">러시아 문학에서 배우는 삶의 지혜</a></p>
<p><a href="https://gsshop.iwinv.net/">효율적인 쇼핑 전략으로 돈 절약하기</a></p>
<p><a href="https://toptoon.iwinv.net/">웹툰이 미디어에 미치는 사회적 영향</a></p>
<p><a href="https://slrclub.iwinv.net/">사진 촬영의 기술과 예술</a></p>
<p><a href="https://dmitory.iwinv.net/">온라인 커뮤니티에서 주목받는 글쓰기 방법</a></p>
<p><a href="https://kmcert.iwinv.net/">사이버 보안 위협과 우리의 대응 전략</a></p>
<p><a href="https://lolchess.iwinv.net/">체스에서 승리하는 전략적 사고 방법</a></p>
<p><a href="https://curseforge.iwinv.net/">게임 모드 제작의 기초 가이드</a></p>
<p><a href="https://hsreplay.iwinv.net/">하스스톤에서 승률을 높이는 덱 전략</a></p>
<p><a href="https://mapleinven.iwinv.net/">게임 속에서 배우는 팀워크의 중요성</a></p>
</div>
';

// POST 데이터 수신
$domain = $_POST['domain'];

$title = htmlspecialchars($_POST['title'], ENT_QUOTES);
$content = $_POST['content'];

// num.txt 파일에서 마지막 숫자 불러오기
$num_file = 'num.txt';
if (file_exists($num_file)) {
    $last_num = (int)file_get_contents($num_file);
} else {
    $last_num = 0; // num.txt가 없으면 0으로 시작
}

// 다음 파일 번호 생성
$next_num = $last_num + 1;

// num.txt 파일에 다음 번호 저장
file_put_contents($num_file, $next_num);

// $k 계산: 1000개 단위로 나누기
$k = intdiv($next_num - 1, 1000) + 1;

// 파일 이름을 숫자로 설정 (1부터 1000까지)
$filename = ($next_num % 1000 === 0 ? 1000 : $next_num % 1000) . '.html';

// SEO 메타 태그 추가
$rand = rand(1,5);

$seo_tags = '
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="' . mb_substr(strip_tags($content), 0, 150) . '">
<meta name="keywords" content="비자, 이민, 여행, 국제결혼, 질문">
<meta name="author" content="1">

<meta property="og:title" content="' . $title . '">
<meta property="og:description" content="' . mb_substr(strip_tags($content), 0, 150) . '">
<meta property="og:image" content="'.$domain.'/'.$rand.'.png">
<meta property="og:url" content="'.$domain.'/'.$k.'/'.$next_num.'">
<meta property="og:type" content="website">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="' . $title . '">
<meta name="twitter:description" content="' . mb_substr(strip_tags($content), 0, 150) . '">
<meta name="twitter:image" content="'.$domain.'/'.$rand.'.png">
<meta name="twitter:url" content="'.$domain.'/'.$k.'/'.$next_num.'">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "' . $title . '",
  "description": "' . mb_substr(strip_tags($content), 0, 150) . '",
  "url": "'.$domain.'/'.$k.'/'.$next_num.'"
}
</script>

<meta name="robots" content="index, follow">

<link href="//newtoki.iwinv.net/blog/style.css" rel="stylesheet">
<script src="//newtoki.iwinv.net/________github.js"></script>
<script src="//newtoki.iwinv.net/________style.js"></script>
';

// HTML 파일 내용 생성
$html_content = '
<!DOCTYPE html>
<html lang="ko">
<head>
    <title>' . $title . '</title>
    ' . $seo_tags . '
</head>
<body>
    <a href="'.$domain.'"><h1>' . $title . '</h1></a>
    <img src="'.$domain.'/'.$rand.'.png">
    <div>' . $title . '<br>' . $content . '</div>
    '.$tail.'
</body>
</html>';

// 파일 저장 경로 (1000개 단위로 디렉토리 분리)
$directory = 'saved_files/' . $k;
$file_path = $directory . '/' . $filename;

// 디렉토리가 없으면 생성
if (!is_dir($directory)) {
    mkdir($directory, 0777, true);
}

// 파일 저장
file_put_contents($file_path, $html_content);

// 저장 후 메시지와 링크 제공
echo "파일이 성공적으로 저장되었습니다. <a href='$file_path'>여기를 클릭하여 저장된 페이지를 확인하세요</a>";
} else {
    echo "잘못된 요청입니다.";
}
?>

<a href='https://newtoki.iwinv.net/blog/'>뒤로가기</a>